/*! For license information please see 2.js.LICENSE.txt?id=ce1bf0923a5cee75253c */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{NF9v:function(t,e,s){"use strict";var a=s("tQyR"),i={props:{full:{type:Boolean,default:!1},field:{type:Object},highlight:{type:String,default:""}},components:{TextHighlight:a.a}},r=(s("rVSg"),s("KHd+")),n=Object(r.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("text-highlight",{staticClass:"font-weight-bold",attrs:{queries:[t.highlight]}},[t._v(t._s(t.field.name))]),t._v(" "),t.field.args?s("span",[t.full?s("span",[t._v("\n      (\n      "),s("div",{staticClass:"ml-5",domProps:{innerHTML:t._s(t.field.args)}}),t._v(")\n    ")]):s("span",[t._v("(...)")])]):t._e(),t._v(" "),t.field.type_def?s("span",{staticClass:"blue--text"},[t._v(": "+t._s(t.field.type_def))]):t._e(),t._v(" "),s("div",{staticClass:"text-caption grey--text pt-1",domProps:{innerHTML:t._s(t.field.description)}})],1)}),[],!1,null,"6b105f36",null);e.a=n.exports},O15G:function(t,e,s){var a=s("XZQw");"string"==typeof a&&(a=[[t.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(a,i);a.locals&&(t.exports=a.locals)},OvGh:function(t,e,s){"use strict";s.r(e);var a=s("o0o1"),i=s.n(a),r=s("LvDl"),n=s.n(r);var l=function(t){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];return function(){return e.reduce((function(t,e){return e(t)}),t.apply(null,arguments))}},o=function(t){return String.prototype.normalize?t.normalize("NFKD").replace(/[\u0080-\uF8FF]/g,""):t},c=function(t){return t.replace(/\s+/g," ").trim()},u=l((function(t){return Array.isArray(t)?t.join(" "):t}),o,c,(function(t){return t.toLocaleLowerCase()})),d=s("tQyR"),f=s("VDrJ"),v=s("NF9v"),p=s("vDqi"),h=s.n(p);function m(t,e,s,a,i,r,n){try{var l=t[r](n),o=l.value}catch(t){return void s(t)}l.done?e(o):Promise.resolve(o).then(a,i)}var _={props:["field","filters"],components:{Field:v.a},data:function(){return{loading:!1,sumary:[],table:{headers:[{text:"Operation",value:"field.name",sortable:!1},{text:"Requests",value:"total_requests",sortable:!1,align:"end"}]}}},watch:{field:function(){this.load()}},methods:{totalRequestByClient:function(t){return n()(t.metrics).sumBy("total_requests")},load:function(){var t,e=this;return(t=i.a.mark((function t(){var s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,h.a.get("/lighthouse-dashboard/fields/".concat(e.field.id,"/sumary"),{params:e.filters.form});case 3:s=t.sent,e.loading=!1,e.sumary=s.data;case 6:case"end":return t.stop()}}),t)})),function(){var e=this,s=arguments;return new Promise((function(a,i){var r=t.apply(e,s);function n(t){m(r,a,i,n,l,"next",t)}function l(t){m(r,a,i,n,l,"throw",t)}n(void 0)}))})()},close:function(){this.$emit("close")}}},g=(s("VznR"),s("KHd+")),y=Object(g.a)(_,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{attrs:{flat:""}},[s("v-card-title",[s("h2",[t._v("Sumary")]),t._v(" "),s("v-spacer"),t._v(" "),s("v-btn",{attrs:{icon:""},on:{click:function(e){return t.close()}}},[s("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),s("v-card-subtitle",{staticClass:"pt-5"},[s("field",{attrs:{field:t.field,full:!0}}),t._v(" "),s("v-divider",{staticClass:"my-5"})],1),t._v(" "),s("v-card-text",[s("h3",{staticClass:"black--text"},[t._v("Clients & Fields")]),t._v(" "),s("p",{staticClass:"mt-3 mb-8"},[t._v("Where that field is used?")]),t._v(" "),t.loading?s("div",{staticClass:"text-center"},[s("v-progress-circular",{attrs:{indeterminate:""}})],1):t._e(),t._v(" "),!t.loading&&t.sumary.length?s("v-expansion-panels",t._l(t.sumary,(function(e){return s("v-expansion-panel",{key:e.id},[s("v-expansion-panel-header",{staticClass:"grey lighten-5"},[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",[t._v(t._s(e.username))]),t._v(" "),s("v-col",{staticClass:"text-right"},[s("v-chip",{attrs:{"x-small":""}},[t._v(t._s(t.totalRequestByClient(e)))])],1)],1)],1),t._v(" "),s("v-expansion-panel-content",[s("v-data-table",{attrs:{headers:t.table.headers,items:e.metrics,loading:t.loading,"hide-default-footer":""},scopedSlots:t._u([{key:"item.total_requests",fn:function(e){var s=e.item;return[t._v("\n              "+t._s(t._f("numeral")(s.total_requests,0))+"\n            ")]}}],null,!0)})],1)],1)})),1):t._e(),t._v(" "),t.sumary.length||t.loading?t._e():s("div",[s("v-alert",{attrs:{icon:"mdi-alert",text:"",dense:""}},[t._v("\n        No operations on selected range.\n      ")])],1)],1)],1)}),[],!1,null,null,null).exports;function x(t,e,s,a,i,r,n){try{var l=t[r](n),o=l.value}catch(t){return void s(t)}l.done?e(o):Promise.resolve(o).then(a,i)}var b={props:["types","start_date","range","clients","selectedClients"],components:{TextHighlight:d.a,FieldSumary:y,Field:v.a,Filters:f.a},data:function(){return{loading:!1,search:"",selectedField:{},display:{sumary:!1,filters:!1},filters:{form:{start_date:this.start_date||"today",range:this.range||[],clients:this.selectedClients||[]},options:{clients:this.clients||[]}},table:{headers:[{text:"Field",value:"name",sortable:!1},{text:"Requests",value:"total_requests",sortable:!1,align:"end"}]}}},computed:{filteredTypes:function(){var t=this;return""===this.search?this.types:n()(this.types).filter((function(e){return t.containsText(e,t.search)})).value()}},methods:{filter:function(){var t,e=this;return(t=i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$inertia.replace("/lighthouse-dashboard/types",{data:e.filters.form,replace:!0,preserveScroll:!0});case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})),function(){var e=this,s=arguments;return new Promise((function(a,i){var r=t.apply(e,s);function n(t){x(r,a,i,n,l,"next",t)}function l(t){x(r,a,i,n,l,"throw",t)}n(void 0)}))})()},selectField:function(t){this.selectedField=t,this.displaySumary()},containsText:function(t,e){var s=n()(t.fields).map("name").join(" ");return u(t.name).includes(u(e))||u(s).includes(u(e))},displaySumary:function(){this.hideFilters(),this.display.sumary=!0},hideSumary:function(){this.display.sumary=!1},displayFilters:function(){this.hideSumary(),this.display.filters=!0},hideFilters:function(){this.display.filters=!1}}},C=Object(g.a)(b,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-app-bar",{staticClass:"pt-2",attrs:{app:"",color:"white",elevation:"1"}},[s("v-row",{staticClass:"mb-5",attrs:{align:"center"}},[s("v-col",[s("h2",[s("v-icon",{attrs:{left:"",color:"black"}},[t._v("mdi-shape-outline")]),t._v("Types\n        ")],1)]),t._v(" "),s("v-col",{staticClass:"text-right",attrs:{cols:"3"}},[s("v-text-field",{attrs:{outlined:"","prepend-inner-icon":"mdi-magnify",label:"Type or Field ...","background-color":"white",autocomplete:"off",dense:"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),s("v-col",{staticClass:"text-right primary--text",attrs:{cols:"auto"}},[s("v-icon",{staticClass:"mb-1 primary--text"},[t._v("mdi-clock-outline")]),t._v("\n        "+t._s(t.filters.form.start_date)+"\n        "),s("v-btn",{staticClass:"ml-3",attrs:{color:"primary",fab:"","x-small":"",depressed:"",dark:""},on:{click:function(e){return t.displayFilters()}}},[s("v-icon",[t._v("mdi-filter-variant")])],1)],1)],1)],1),t._v(" "),t._l(t.filteredTypes,(function(e){return s("v-data-table",{key:e.id,staticClass:"elevation-1 row-pointer mb-8",attrs:{headers:t.table.headers,items:e.fields,"hide-default-footer":""},on:{"click:row":t.selectField},scopedSlots:t._u([{key:"top",fn:function(){return[s("div",{staticClass:"pa-3"},[s("text-highlight",{staticClass:"title",attrs:{queries:[t.search]}},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"text-caption grey--text"},[t._v(t._s(e.description))])],1)]},proxy:!0},{key:"item.name",fn:function(e){var a=e.item;return[s("field",{staticClass:"py-4",attrs:{field:a,highlight:t.search}})]}},{key:"item.total_requests",fn:function(e){var s=e.item;return[t._v(t._s(t._f("numeral")(s.total_requests,0)))]}}],null,!0)})})),t._v(" "),0===t.filteredTypes.length?s("div",{staticClass:"text-center grey--text"},[s("v-icon",{attrs:{color:"grey","x-large":""}},[t._v("mdi-weather-windy")]),t._v(" "),s("h3",{staticClass:"mt-3"},[t._v("Oops! Nothing here.")]),t._v(" "),0===t.types.length?s("p",{staticClass:"text-caption mt-3"},[t._v("Make your first request to this Schema.")]):s("p",{staticClass:"text-caption mt-3"},[t._v("\n      It searchs only on\n      "),s("strong",[t._v("Types")]),t._v(" and\n      "),s("strong",[t._v("Fields")]),t._v(".\n    ")])],1):t._e(),t._v(" "),s("v-navigation-drawer",{staticClass:"pa-5",attrs:{right:"",app:t.display.filters,width:"380"},model:{value:t.display.filters,callback:function(e){t.$set(t.display,"filters",e)},expression:"display.filters"}},[s("filters",{attrs:{filters:t.filters},on:{filter:function(e){return t.filter()},close:function(e){return t.hideFilters()}}})],1),t._v(" "),s("v-navigation-drawer",{staticClass:"pa-5",attrs:{right:"",app:t.display.sumary,width:"380"},model:{value:t.display.sumary,callback:function(e){t.$set(t.display,"sumary",e)},expression:"display.sumary"}},[s("field-sumary",{attrs:{field:t.selectedField,filters:t.filters},on:{close:function(e){return t.hideSumary()}}})],1),t._v(" "),s("v-overlay",{attrs:{value:t.loading}},[s("v-progress-circular",{attrs:{indeterminate:""}})],1)],2)}),[],!1,null,null,null);e.default=C.exports},TWxp:function(t,e,s){(t.exports=s("I1BE")(!1)).push([t.i,".more{cursor:pointer;color:#000;text-align:right;margin-top:10px}",""])},VDrJ:function(t,e,s){"use strict";var a={props:["filters"],data:function(){return{options:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"last week",label:"Last week"},{value:"last month",label:"Last Month"},{value:"in custom range",label:"In custom range"}]}},computed:{dateRangeText:function(){return this.filters.form.range.join(" ~ ")},isCustomRange:function(){return"in custom range"===this.filters.form.start_date}},methods:{filter:function(){this.isCustomRange&&this.filters.form.range.length<2||(this.isCustomRange||(this.filters.form.range=[]),this.$emit("filter"))},uncheckAll:function(){this.filters.form.clients.length&&(this.filters.form.clients=[]),this.filter()}}},i=s("KHd+"),r=Object(i.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{attrs:{flat:""}},[s("v-card-title",[s("h3",[t._v("Filters")]),t._v(" "),s("v-spacer"),t._v(" "),s("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$emit("close")}}},[s("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),s("v-card-text",{staticClass:"mt-5"},[s("div",{staticClass:"font-weight-black text-caption"},[t._v("STARTING FROM")]),t._v(" "),s("v-radio-group",{on:{change:function(e){return t.filter()}},model:{value:t.filters.form.start_date,callback:function(e){t.$set(t.filters.form,"start_date",e)},expression:"filters.form.start_date"}},t._l(t.options,(function(t){return s("v-radio",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),t.isCustomRange?s("div",[s("v-date-picker",{staticClass:"elevation-2",attrs:{max:(new Date).toISOString(),"show-current":!1,"no-title":"",range:""},on:{change:function(e){return t.filter()}},model:{value:t.filters.form.range,callback:function(e){t.$set(t.filters.form,"range",e)},expression:"filters.form.range"}}),t._v(" "),s("div",{staticClass:"py-3 font-weight-bold"},[t.dateRangeText?s("v-icon",{staticClass:"mb-1",attrs:{small:"",left:""}},[t._v("mdi-selection-drag")]):t._e(),t._v("\n        "+t._s(t.dateRangeText)+"\n      ")],1)],1):t._e(),t._v(" "),s("div",{staticClass:"font-weight-black text-caption mt-5 mb-5"},[t._v("CLIENTS")]),t._v(" "),s("v-btn",{attrs:{"x-small":"",outlined:""},on:{click:function(e){return t.uncheckAll()}}},[t._v("uncheck all")]),t._v(" "),t._l(t.filters.options.clients,(function(e){return s("v-checkbox",{key:e.id,attrs:{label:e.username,value:e.id,"hide-details":"",multiple:""},on:{change:function(e){return t.filter()}},model:{value:t.filters.form.clients,callback:function(e){t.$set(t.filters.form,"clients",e)},expression:"filters.form.clients"}})}))],2)],1)}),[],!1,null,null,null);e.a=r.exports},VznR:function(t,e,s){"use strict";var a=s("cLUc");s.n(a).a},XZQw:function(t,e,s){(t.exports=s("I1BE")(!1)).push([t.i,"span[data-v-6b105f36] .arg-name{color:indigo}span[data-v-6b105f36] .arg-type{color:orange}",""])},cLUc:function(t,e,s){var a=s("TWxp");"string"==typeof a&&(a=[[t.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(a,i);a.locals&&(t.exports=a.locals)},rVSg:function(t,e,s){"use strict";var a=s("O15G");s.n(a).a}}]);
//# sourceMappingURL=2.js.map?id=ce1bf0923a5cee75253c